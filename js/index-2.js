window.timeOut=!0,window.chromeDrawAtten=!0;var allowCastTime,allowMirrorCastTime,invitationfunc,allowCastTimeOut=!1,mirrorTimeOut=!1,allowFullCastTimeOut=!1,clientRotation=0,locaIplDisplay=!1,IsBoxlightProtocol=!1,IsCommonProtocol=!1,castMode=2,mirrorMode=3,mulitMode=0,multiScreen=1,castState=0,box_castMode=0,box_mirrorMode=0;let compositionInputLock=!1;var cancelCastClient=JSON.stringify({cancelCastRequest:"N"}).toString(),cancelFullCastClient=JSON.stringify({exitFullscreen:"N"}).toString(),box_cancelCastClient=JSON.stringify({cancelCast:"N"}).toString(),box_cancelFullCastClient=JSON.stringify({exitFullscreen:"N"}).toString();function pinInputChecker(){let e="",s=$("#pinconnect").val(),t=!1;for(var n=0;n<s.length;n++){let o=s.charCodeAt(n);46==o&&(t=!0,e+=s.charAt(n)),o>=48&&o<=57&&(e+=s.charAt(n)),o>=65&&o<=90&&(e+=s.charAt(n)),o>=97&&o<=122&&(e+=s.charAt(n)),"ã€‚"==s.charAt(n)&&(t=!0,e+=".")}$("#pinconnect").val(e),chrome.storage.sync.get("historyList",(s=>{if(null==s.historyList)$("#local_ip").css("display","none");else{s=s.historyList;let t=e.length;$("#local_ip_table").empty(),s.forEach((s=>{if(s.ipaddress.length>=t&&s.ipaddress.substring(0,t)==e){let e=jQuery("<tr><td><span></span><span></span></td></tr>");e.find("td").find("span").eq(0).text(s.ipaddress),e.find("td").find("span").eq(1).text("("+s.ipname+")"),$("#local_ip_table").append(e),e.click((function(){var e=$(this).find("td").find("span").eq(0).text();$("#pinconnect").val(e),$("#local_ip_table").empty(),$("#local_ip").css("display","none"),pwdbybutton()}))}})),$("#local_ip table").children().length>0?$("#local_ip").css("display","block"):$("#local_ip").css("display","none")}})),""!=$("#pinconnect").val()?($("#ipInput_null").text(""),$("#pinconnect").addClass("upperletter")):$("#pinconnect").removeClass("upperletter")}function btn_eshare(){$(this).hasClass("disable")||($("#btn_eshare").hasClass("mirror")?offlineOnClick(btn_eshare_click):(chrome.runtime.sendMessage({action:"requestpermission",powerhostname:chromeAccount+"Sender",powerstring:"Connected\r\n%@\r\nhello\r\n",powerpassword:address}),document.getElementById("Jurisdiction").style.display="block",document.getElementById("Jurisdictionp").innerHTML=chrome.i18n.getMessage("loadingmirroring"),document.getElementById("cancel").innerHTML=chrome.i18n.getMessage("cancel"),setTimeout((function(){timeOut&&(document.getElementById("Jurisdiction").style.display="none")}),12e3)))}function hex2bin(e){return parseInt(e,16).toString(2).padStart(8,"0")}function GetFeatures(e,s){let t={isModeratorSupport:!1,isPro:!1,isWindows:!1,isPasswordNeeded:!1};e=(e=hex2bin(e)).split("").reverse().join(""),1==parseInt(e.charAt(20))&&(t.isModeratorSupport=!0),1==parseInt(e.charAt(8))&&(t.isPro=!0),1==parseInt(e.charAt(9))&&(t.isWindows=!0),1==parseInt(e.charAt(6))&&(t.isPasswordNeeded=!0),s&&s(t)}function btn_eshare_click(){$("#btn_eshare").hasClass("mirror")?(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),chrome.runtime.sendMessage({action:"stopMirror"})):(chrome.app.window.get("tvMirrorsWinodw")&&chrome.app.window.get("tvMirrorsWinodw").close(),chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nstart\r\n\r\n"}),trackEvent("click","Mirror","Start"),chrome.runtime.sendMessage({action:"startMirror",address:address}))}$("#findDevice").click((function(){trackEvent("click","DeviceList","In"),ShowDeviceList()})),$("#buttonChromeAccount").click((function(){$("#name_p").text(""),""==$("#ChromeAccount").val()?($("#name_p").text(chrome.i18n.getMessage("CannotIpNull")),$("#buttonChromeAccount").attr("disabled",!0),$("#ChromeAccount").focus()):$("#ChromeAccount").val()==chrome.i18n.getMessage("CanNotNull")?$("#ChromeAccount").val(""):(chrome.runtime.sendMessage({action:"saveDeviceName",data:$("#ChromeAccount").val()}),chromeAccount=$("#ChromeAccount").val(),chrome.runtime.sendMessage({action:"DeviceInfoChange",reportClientInfo:"N",ip:address,clientName:chromeAccount,clientType:4,isTouchable:0,versionName:chromeVersion,versionCode:1}),$("#inputChromeAccount").css("display","none"))})),$("#ChromeAccount").on("input propertychange",(function(){$("#ChromeAccount").val().length>0&&$("#name_p").text().length>0&&$("#name_p").text("")})),$("#pwdbybutton").click((function(){$("#pwdbybutton").css("background-image","url(/images/ic_landing_pressed@3x.png)"),pwdbybutton(),$("#local_ip").css("display","none"),$("#local_ip_table").empty()})),$("#ipErrordiv_a").click((function(){$("#ipErrordiv").css("display","none"),$("#ipErrordiv p").text(chrome.i18n.getMessage("ConnectIpError")),$("#pinconnect").focus();let e=$("#pinconnect").val();$("#pinconnect").val("").val(e),$("#pwdbybutton").css("pointer-events","auto"),$(" #ssid #button_connecttwo").css("pointer-events","auto")})),$("#pinconnect").focus((function(){locaIplDisplay=!1,chrome.storage.sync.get("historyList",(function(e){if(null==e.historyList)$("#local_ip").css("display","none");else{let s=e.historyList,t=$("#pinconnect").val(),n=t.length;$("#local_ip_table").empty(),s.forEach((e=>{if(e.ipaddress.length>=n&&e.ipaddress.substring(0,n)==t){let s=jQuery("<tr><td><span></span><span></span></td></tr>");s.find("td").find("span").eq(0).text(e.ipaddress),s.find("td").find("span").eq(1).text("("+e.ipname+")"),$("#local_ip_table").append(s),s.click((function(){var e=$(this).find("td").find("span").eq(0).text();$("#pinconnect").val(e),$("#local_ip_table").empty(),$("#local_ip").css("display","none"),pwdbybutton()}))}})),$("#local_ip table").children().length>0?$("#local_ip").css("display","block"):$("#local_ip").css("display","none")}}))})),$("#pinconnect").on("keyup",(function(e){13===e.keyCode&&"block"===$("#local_ip").css("display")&&""===$("#pinconnect").val()&&$("#local_ip").css("display","none")})),$("#pinconnect").bind("input propertychange change",(function(e){compositionInputLock||pinInputChecker()})),$("#pinconnect").on("compositionstart",(function(){compositionInputLock=!0})),$("#pinconnect").on("compositionend",(function(){compositionInputLock=!1,pinInputChecker()})),$("#pinconnect").focusout((function(){setTimeout((function(){"block"===$("#local_ip").css("display")&&($("#local_ip").css("display","none"),$("#local_ip_table").empty())}),150)})),UIActionProc.checkPwdThree=async function(e){checkIpTimeOut||cancelPincode&&(ipconnectBoolean=!0,$("#ipErrordivconnecting").css("display","none"),$("#pwdbybutton").css("background-image","url(/images/ic_landing_normal@3x.png)"),ConnectWithPIN?(connectDevice(pwdaddress,type,pwdaddress),ConnectWithPIN=!1):e.checkPassword.indexOf("password")>=0?($("#myModalLabel").html(chrome.i18n.getMessage("password")),$("#myModalLabel").removeClass("myModalLabelcolor"),$("#passwordinput").val(""),$("#passwordPoint").text(" "),$("#myModal").modal().on("shown.bs.modal",(function(){autofocus()}))):($("#pinconnect").val(""),connectDevice(hostname,type,pwdaddress)))},$("#btn_eshare").click((function(){chrome.app.window.get("tvMirrorsWinodw");$(this).hasClass("disable")||($("#btn_eshare").hasClass("mirror")?offlineOnClick(btn_eshare_click):IsModeratorAvailable?IsCommonProtocol?0==castMode?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==castMode?btn_eshare_click():2==castMode&&(null!=chrome.app.window.get("tvMirrorsWinodw")?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("pleaseClose")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):(allowCastTimeOut=!1,mirrorbefore(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("waitScreenConnect")),$("#Cyes").addClass("allowCast"),$(".allowCast").css("display","none"),$("#Cyes").css("display","none"),$("#Ccancel").css("display","block"),$("#Ccancel").css("margin-left","70px"),$("#Ccancel").css("margin-right","70px"),$("#Ccancel").addClass("allowCastCancel"),allowCastTime=setTimeout((function(){!allowCastTimeOut&&allowCastTime&&($("#Cyes").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("requestTimeout")),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),$("#Cyes").addClass("allowCastTimeOut"),$("#Ccancel").addClass("allowCastTimeOutCancel"),$("#Cyes").css("margin-left","70px"),$("#Cyes").css("margin-right","70px"),$("#Cyes").css("display","block"),$("#Ccancel").css("display","none"),clearTimeout(allowCastTime),allowCastTime=void 0)}),1e4))):IsBoxlightProtocol&&(-1==box_castMode?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==box_castMode?btn_eshare_click():0==box_castMode&&(null!=chrome.app.window.get("tvMirrorsWinodw")?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("pleaseClose")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):(allowCastTimeOut=!1,mirrorbefore(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("waitScreenConnect")),$("#Cyes").addClass("allowCast"),$(".allowCast").css("display","none"),$("#Ccancel").css("display","block"),$("#Ccancel").css("margin-left","70px"),$("#Ccancel").css("margin-right","70px"),$("#Ccancel").addClass("allowCastCancel"),allowCastTime=setTimeout((function(){allowCastTimeOut||($("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("requestTimeout")),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),$("#Cyes").addClass("allowCastTimeOut"),$("#Ccancel").addClass("allowCastTimeOutCancel"),$("#Cyes").css("margin-left","70px"),$("#Cyes").css("margin-right","70px"),$("#Cyes").css("display","block"),$("#Ccancel").css("display","none"))}),1e4)))):btn_eshare_click())})),$(document).on("click","#cancelIpConnect",(function(){cancelPincode=!1,$("#ipErrordivconnecting").css("display","none"),$("#pinconnect").focus();let e=$("#pinconnect").val();$("#pinconnect").val("").val(e)})),$("#btn_Reverse_share").click((function(){IsModeratorAvailable?IsCommonProtocol?0==mirrorMode?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==mirrorMode||2==mirrorMode?chrome.runtime.sendMessage({action:"startTvMirror",hubIp:address,rotation:clientRotation}):3==mirrorMode&&(mirrorTimeOut=!1,mirrorRequest(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("waitScreenConnect")),$("#Cyes").addClass("allowMirrorCast"),$(".allowMirrorCast").css("display","none"),$("#Ccancel").css("margin-left","70px"),$("#Ccancel").addClass("allowMirrorCastCancel"),$("#Cyes").css("display","none"),$("#Ccancel").css("display","block"),allowMirrorCastTime=setTimeout((function(){!mirrorTimeOut&&allowMirrorCastTime&&($("#Cyes").css("display","block"),$("#Ccancel").css("display","none"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("requestTimeout")),$("#Cyes").removeClass("allowMirrorCast"),$("#Ccancel").removeClass("allowMirrorCastCancel"),$("#Cyes").addClass("allowMirrorCastTimeOut"),$("#Ccancel").addClass("allowMirrorCastTimeOutCancel"),$("#Cyes").css("margin-left","70px"),$("#Cyes").css("margin-right","70px"),clearTimeout(allowMirrorCastTime),allowMirrorCastTime=void 0)}),1e4)):IsBoxlightProtocol&&(-1==box_mirrorMode?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):(1==box_mirrorMode||0==box_mirrorMode)&&chrome.runtime.sendMessage({action:"startTvMirror",hubIp:address,rotation:clientRotation})):chrome.runtime.sendMessage({action:"startTvMirror",hubIp:address,rotation:clientRotation})})),$("#CloseResolvingPower").click((function(){$("#ResolvingPower").addClass("viewHide")})),$("#ethernet").click((function(){$("#device_name").css("display","block"),$("#device_name_b").css("display","none"),$("#device_name_wide_alert").css("display","none")})),$("#device_name_input").change((function(){$("#device_name_wide_alert").css("display","none"),$("#device_name_b").css("display","none")})),$("#device_name_button").click((function(){var e=$("#device_name_input").val();e.length>13?$("#device_name_wide_alert").css("display","block"):e?chrome.storage.sync.set({chrome:e},(function(){chrome.runtime.sendMessage({action:"saveDeviceName",data:e}),$("#ipaddress dl dd#ethernet").text(e),$("#device_name").css("display","none")})):$("#device_name_b").css("display","block")})),$("#device_name_cancel").click((function(){$("#device_name").css("display","none")})),UIActionProc.timeOutProcess=function(e){timeOut=!0},UIActionProc.receiverError=function(e){chrome.runtime.sendMessage({action:"ReceiverError"})},UIActionProc.exceDisconnect=function(e){chrome.runtime.sendMessage({action:"windowfeature",address:address,windowString:"/GetServerProperty\r\n"+chromeAccount+"\r\n"})},UIActionProc.exeception=function(e){btn_eshare()},UIActionProc.onServicesNotFound=function(){},UIActionProc.displayLoading=function(e,s){e?($("#taotable_div").css({display:"none"}),$(".DeviceListTitle").css("display","none"),$(".list_table").empty(),$(".loading_header").removeClass("remove_loading"),$("#loading").addClass("loading"),s||!navigator.onLine?($("#loading_text").css("color","red"),$("#loading_text").html(chrome.i18n.getMessage("network")),$("#ipInput_null").text("")):($("#loading_text").css("color","black"),$("#loading_text").html(chrome.i18n.getMessage("loading_text")))):$(".loading_header").hasClass("remove_loading")||(ReceiverList=[],$(".loading_header").addClass("remove_loading"),$("#taotable_div").css({display:"block"}),$(".DeviceListTitle").css("display","block"))},UIActionProc.onProtocolDetected=function(e){e=e.protocol,IsBoxlightProtocol=!1,IsCommonProtocol=!1,"boxlight"==e?(IsBoxlightProtocol=!0,chrome.runtime.sendMessage({action:"clientSayhello",getServerInfo:"sayHello\r\n"+chromeAccount+"\r\n\r\n",address:address})):"common"==e&&(IsCommonProtocol=!0)},UIActionProc.requestDeviceName=function(e){$("#inputChromeAccount").css("display","block"),$("#ChromeAccount").val(chromeAccount),setTimeout((function(){$("#ChromeAccount").focus(),$("#ChromeAccount").select()}),200)},languagefind(),UIActionProc.checkpwd=function(e){let s=e.checkPassword;s.indexOf("success")>=0?($("#pinconnect").val(""),connectDevice(hostname,type,address),$("div#myModal").modal("hide")):s.indexOf("success")<0&&($("#myModalLabel").html(chrome.i18n.getMessage("passworderror")),$("#myModalLabel").addClass("myModalLabelcolor"))},UIActionProc.onDeviceNameRead=function(e){chromeAccount=e.data},UIActionProc.onDeviceNameSaved=function(e){chromeAccount=e.data},UIActionProc.onFeaturesReceived=function(e){let s=e.data,t=null;$("#pinconnect").removeClass("upperletter"),"json"==s.protocol?(s=JSON.parse(s.data),t=s.feature):t=s.data.split(" ")[0].split("=")[1],GetFeatures(t,(s=>{s.isWindows||s.isPro?s.isModeratorSupport?(IsModeratorAvailable=!0,"original"==e.data.protocol&&chrome.runtime.sendMessage({action:"CreateModConn",reportClientInfo:"N",ip:address,clientName:chromeAccount,clientType:4,isTouchable:0,versionName:chromeVersion,versionCode:1})):(IsModeratorAvailable=!1,chrome.runtime.sendMessage({action:"clientSayhello",getServerInfo:"sayHello\r\n"+chromeAccount+"\r\n\r\n",address:address}),chrome.runtime.sendMessage({action:"startCastSocketChecker"})):"block"==$("#main_container").css("display")&&($("#div_home").click(),$("#ipNotPro").css("display","block"),$("#ipNotPro_p").html(chrome.i18n.getMessage("isnotpro").format({str0:""})))}));let n=s.name;n&&($("#p_text").html(n),ConnectWithIP&&(chrome.storage.sync.get("historyList",(e=>{if(e.historyList){e.historyList.length>5&&e.historyList.splice(5,e.historyList.length-5);for(var s=0;s<e.historyList.length;s++)pwdaddress==e.historyList[s].ipaddress&&e.historyList.splice(s,1);e.historyList.unshift({ipaddress:pwdaddress,ipname:n}),chrome.storage.sync.set({historyList:e.historyList},(function(){}))}else connectHistory.unshift({ipaddress:pwdaddress,ipname:n}),chrome.storage.sync.set({historyList:connectHistory},(()=>{}))})),ConnectWithIP=!1)),$("#ipInput_null").text("")},UIActionProc.btnStopMirrorCancel=function(e){chrome.runtime.sendMessage({action:"cancelChooseDesktopMedia"})},UIActionProc.btnStartMirror=function(e){$("#btn_eshare").hasClass("disable")||setTimeout((function(){btn_eshare_click()}),500)},UIActionProc.btnStopMirror=function(e){$("#btn_eshare").hasClass("disable")||btn_eshare_click()},UIActionProc.checkPowerUi=function(e){powercheckmessage=e.checkpower,"allowed"==powercheckmessage.replace(/^\s+|\s+$/gm,"")&&(document.getElementById("Jurisdiction").style.display="none",timeOut=!1,offlineOnClick(btn_eshare_click)),"Denyed"==powercheckmessage.replace(/^\s+|\s+$/gm,"")&&(timeOut=!1,document.getElementById("Jurisdictionp").innerHTML=chrome.i18n.getMessage("refusemirroring"),setTimeout((function(){document.getElementById("Jurisdiction").style.display="none"}),1e3)),"timeout"==powercheckmessage.replace(/^\s+|\s+$/gm,"")&&(timeOut=!1,document.getElementById("Jurisdictionp").innerHTML=chrome.i18n.getMessage("requesttimeout"),setTimeout((function(){document.getElementById("Jurisdiction").style.display="none"}),1e3))},$("#cancel").click((function(){document.getElementById("Jurisdiction").style.display="none",chrome.runtime.sendMessage({action:"requestpermission",powerhostname:"Chrome Sender",powerstring:"disConnected\r\n%@\r\nhello\r\n",powerpassword:address})})),UIActionProc.screenPower=function(e){setInterval((function(){chrome.system.display.getInfo((function(e){for(var s=0;s<e.length;s++)if(e[s].isPrimary){e[s].bounds.width!=ScreenDisplayW&&(ScreenDisplayW=e[s].bounds.width,ScreenDisplayH=e[s].bounds.height,$("#ResolvingPower").removeClass("viewHide"),chrome.app.window.get("ESClientMain").restore());break}}))}),2e3)},UIActionProc.createPost=function(e){chrome.app.window.create("spot.html",{id:"ESClientTime",frame:"none",outerBounds:{width:1,height:1,maxWidth:1,maxHeight:1},alwaysOnTop:!0},(function(e){e.outerBounds.setPosition(0,0)}))};var current_window=chrome.app.window.get("ESClientMain");function setCss3(e,s){for(var t in s){var n=t;if(n.indexOf("-")>0){var o=n.indexOf("-");n=n.replace(n.substr(o,2),n.substr(o+1,1).toUpperCase())}e.style[n]=s[t],n=n.replace(n.charAt(0),n.charAt(0).toUpperCase()),e.style[n]=s[t],e.style["webkit"+n]=s[t],e.style["moz"+n]=s[t],e.style["o"+n]=s[t],e.style["ms"+n]=s[t]}}function pwdInputChecker(){let e=$("#passwordinput").val(),s="";for(var t=0;t<e.length;t++){let n=e.charCodeAt(t);n>=48&&n<=57&&(s+=e.charAt(t)),n>=65&&n<=90&&(s+=e.charAt(t)),n>=97&&n<=122&&(s+=e.charAt(t))}s.length>0&&" "!==$("#passwordPoint").text()&&$("#passwordPoint").text(" "),s.length>8?$("#passwordinput").val(s.substring(0,8)):$("#passwordinput").val(s)}async function reset(e){$("#pinconnect").val(""),$("#main_container").css("display","none"),IsModeratorAvailable&&!IsBoxlightProtocol||!$("#device_list_container").hasClass("viewHide")||await chrome.runtime.sendMessage({action:"clientSayhello",getServerInfo:"sayByebye\r\n"+chromeAccount+"\r\n\r\n",address:address}),chromeDeviceAbnormal&&(clearInterval(chromeDeviceAbnormal),chromeDeviceAbnormal=null),newtime=0,oldtime=0,chrome.app.window.get("tvMirrorsWinodw")&&await chrome.runtime.sendMessage({tvMirrorAction:"onStopTvMirror"}),$("#device_list_container").removeClass("viewHide"),$("#footer_navigation_account").css("display","none"),$("#footer_navigation_file").css("display","none"),$("#footer_navigation_voice").css("display","none"),$("#btn_eshare").hasClass("mirror")&&(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),await chrome.runtime.sendMessage({action:"stopMirror"})),chrome.runtime.sendMessage({action:"disconnectWithReceiver"}),e?setTimeout((()=>{try{chrome.runtime.getBackgroundPage((function(e){e.close()}))}catch(e){}chrome.runtime.reload()}),250):($(".div_cong").css("display","block"),$("#main_control_index").css("display","none"),navigator.onLine?UIActionProc.displayLoading(!0,!1):UIActionProc.displayLoading(!0,!0),setinter=setInterval(RefreshDeviceList,3e3))}function offlineOnClick(e){e()}$("#minimize").click((function(){current_window.minimize()})),$("#close").click((function(){reset(!1),current_window.close()})),$("#minimizetwo").click((function(){current_window.minimize()})),$("#closetwo").click((function(){chrome.app.window.getAll();chrome.runtime.sendMessage({action:"stopReturn",address:address,stop:"stopreturn"}),current_window.close()})),UIActionProc.StartSendHeart=function(e){var s=$.parseJSON(e.data);clientRotation=null==s.rotation?0:s.rotation},UIActionProc.ReponseHeart=function(e){if(IsCommonProtocol){oldtime=(new Date).getTime();let t=JSON.parse(e.data);t.protocol="common",t=JSON.stringify(t),chrome.runtime.sendMessage({action:"sendHeartBeatToMirror",data:t});var s=$.parseJSON(e.data);castMode!=s.castMode&&0==(castMode=s.castMode)&&$("#btn_eshare").hasClass("mirror")&&(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),chrome.runtime.sendMessage({action:"stopMirror"}),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")),mirrorMode!=s.mirrorMode&&0==(mirrorMode=s.mirrorMode)&&chrome.app.window.get("tvMirrorsWinodw")&&(IsMirroring=!1,chrome.app.window.get("tvMirrorsWinodw").close(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")),multiScreen!=s.multiScreen&&(multiScreen=s.multiScreen),castState!=s.castState&&(0==(castState=s.castState)?($("#div_fullscreen_text").html(chrome.i18n.getMessage("FullScreen")),$("#div_home_image").css("display","none"),$("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenoff_normal@2x.png)")):1==castState&&1!=multiScreen?($("#div_fullscreen_text").html(chrome.i18n.getMessage("FullScreen")),$("#div_home_image").css("display","block"),$("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenoff_normal@2x.png)")):1==castState&&1==multiScreen?($("#div_fullscreen_text").html(chrome.i18n.getMessage("FullScreen")),$("#div_home_image").css("display","none"),$("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenoff_normal@2x.png)")):2==castState&&($("#div_fullscreen_text").html(chrome.i18n.getMessage("cancelFullText")),$("#div_home_image").css("display","block"),$("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenon_normal@2x.png)")))}else if(IsBoxlightProtocol){let s=e.data;oldtime=(new Date).getTime(),e.data.protocol="boxlight";let t=JSON.stringify(e.data);if(chrome.runtime.sendMessage({action:"sendHeartBeatToMirror",data:t}),s.hasOwnProperty("hostInteract")&&s.hostInteract!=box_mirrorMode)switch(box_mirrorMode=s.hostInteract,s.hostInteract){case 1:case 0:break;case-1:chrome.app.window.get("tvMirrorsWinodw")&&(IsMirroring=!1,chrome.app.window.get("tvMirrorsWinodw").close(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("closeScreen")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px"))}if(s.hasOwnProperty("hostCastable")&&s.hostCastable!=box_castMode)switch(box_castMode=s.hostCastable,s.hostCastable){case 1:case 0:break;case-1:$("#btn_eshare").hasClass("mirror")&&(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),chrome.runtime.sendMessage({action:"stopMirror"}))}}},UIActionProc.tvwindowcreate=function(e){IsMirroring=!0},UIActionProc.tvwindowclose=function(e){IsMirroring=!1},UIActionProc.reponseCastRequest=function(e){if(IsCommonProtocol){let s=JSON.parse(e.data);IsScreenRequesting?(allowCastTime&&clearTimeout(allowCastTime),0==s.replyCastRequest?($("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("ScreenRefused")),$("#Cyes").addClass("allowCastRequest"),$("#Ccancel").addClass("allowCastRequestCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==s.replyCastRequest?($("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),null!=chrome.app.window.get("tvMirrorsWinodw")?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("pleaseClose")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nstart\r\n\r\n"}),trackEvent("click","Mirror","Start"),chrome.runtime.sendMessage({action:"startMirror",address:address}))):s.replyCastRequest):IsMirrorRequesting?(allowMirrorCastTime&&clearTimeout(allowMirrorCastTime),0==s.replyCastRequest?($("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowMirrorCast"),$("#Ccancel").removeClass("allowMirrorCastCancel"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("ScreenRefused")),$("#Cyes").addClass("allowCastRequest"),$("#Ccancel").addClass("allowCastRequestCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==s.replyCastRequest?($("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowMirrorCast"),$("#Ccancel").removeClass("allowMirrorCastCancel"),chrome.runtime.sendMessage({action:"startTvMirror",hubIp:address,rotation:clientRotation})):2==s.replyCastRequest&&($("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Cyes").removeClass("allowMirrorCast"),$("#Ccancel").removeClass("allowMirrorCastCancel"),$("#Cyes").addClass("allowMirrorCastTimeOut"),$("#Ccancel").addClass("allowMirrorCastTimeOutCancel"))):IsFullScreenRequesting&&(0==s.replyCastRequest?($("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowFullCast"),$("#Ccancel").removeClass("allowFullCastCancel"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("ScreenRefused")),$("#Cyes").addClass("allowFullCastRequest"),$("#Ccancel").addClass("allowFullCastRequestCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):1==s.replyCastRequest?1==castMode?$("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenoff_normal@2x.png)"):($("#div_fullscreen_photo").css("background-image","url(/imgMainControl/fullscreenon_normal@2x.png)"),$("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowFullCast"),$("#Ccancel").removeClass("allowFullCastCancel")):2==s.replyCastRequest&&($("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("ScreenReTimeOut")),$("#Cyes").removeClass("allowFullCast"),$("#Ccancel").removeClass("allowFullCastCancel"),$("#Cyes").addClass("allowFullCastTimeOut"),$("#Ccancel").addClass("allowFullCastTimeOutCancel")))}else if(IsBoxlightProtocol){switch(e.data.allowCast){case 1:$("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),null!=chrome.app.window.get("tvMirrorsWinodw")?($("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("pleaseClose")),$("#Cyes").addClass("closeScreen"),$("#Ccancel").addClass("closeScreenCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px")):(chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nstart\r\n\r\n"}),trackEvent("click","Mirror","Start"),chrome.runtime.sendMessage({action:"startMirror",address:address}));break;case 0:$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("ScreenRefused")),$("#Cyes").addClass("allowCastRequest"),$("#Ccancel").addClass("allowCastRequestCancel"),$("#Ccancel").css("display","none"),$("#Cyes").css("margin-right","70px"),allowCastTimeOut=!0,allowCastTime&&clearInterval(allowCastTime)}}},UIActionProc.stopFromService=function(e){chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),chrome.runtime.sendMessage({action:"stopMirror"})},UIActionProc.receiveDisClient=function(e){IsMirroring&&chrome.runtime.sendMessage({action:"stopReturn",address:address,stop:"stopreturn"}),$("#div_home").click()},UIActionProc.invitationScreen=function(e){let s="undefined";if(IsCommonProtocol)s=JSON.parse(e.castInvitation).inviteCast;else{if(!IsBoxlightProtocol)return;s=e.castInvitation.castInvitation}$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("invitationString").format({str0:s})),chrome.app.window.get("tvMirrorsWinodw")&&chrome.app.window.get("ESClientMain").show(),$("#Cyes").addClass("askInvitation"),$("#Cyes").css({"margin-right":"16px",display:"block","margin-left":"unset"}),$("#Ccancel").css({"margin-left":"16px",display:"block","margin-right":"unset"}),$("#Ccancel").addClass("askInvitationCancel"),$(".askInvitation").html(chrome.i18n.getMessage("acceptScreen")),$(".askInvitationCancel").html(chrome.i18n.getMessage("denyScreen")),invitationTimeOut=!1,invitationfunc=setTimeout((function(){if(!invitationTimeOut){$("#Cyes").removeClass("askInvitation"),$("#Ccancel").removeClass("askInvitationCancel"),$("#Cyes").html(chrome.i18n.getMessage("Determine")),$("#Ccancel").html(chrome.i18n.getMessage("cancel")),$("#Cpermisson").css("display","none");var e=JSON.stringify({replyCastInvite:2}).toString();chrome.runtime.sendMessage({action:"askInvitation",askInvitationKey:e})}}),1e4)},UIActionProc.cancelinvitationScreen=function(e){invitationTimeOut=!0,invitationfunc&&clearTimeout(invitationfunc),$("#Cyes").removeClass("askInvitation"),$("#Ccancel").removeClass("askInvitationCancel"),$("#Cyes").html(chrome.i18n.getMessage("Determine")),$("#Ccancel").html(chrome.i18n.getMessage("cancel")),$("#Cpermisson").css("display","none")},UIActionProc.modHeartBeatTimeout=function(e){$("#div_home").click()},$("#refreshbtn").click((function(){"block"==$("#local_ip").css("display")&&($("#local_ip").css("display","none"),$("#local_ip_table").empty()),ReceiverList=[],$(".list_table").empty();let e=document.getElementById("refreshbtn");setCss3(e,{transform:"rotate(10deg)","transform-origin":"50% 50%"});let s=0,t=setInterval((function(){s+=8,setCss3(e,{transform:"rotate("+s+"deg)","transform-origin":"15px 15px"})}),30);setTimeout((function(){clearInterval(t)}),1350)})),$(document).keydown((function(e){if(13==e.keyCode)if("none"==$("div#myModal").css("display"))if("block"==$("#inputChromeAccount").css("display"))$("#buttonChromeAccount").click();else if("block"==$("#ipNotPro").css("display"))$("#ipNotPro_check").click();else if("block"==$("#main_container").css("display"));else if("block"==$("#ipErrordiv").css("display")){$("#ipErrordiv").css("display","none"),$("#pinconnect").focus();let e=$("#pinconnect").val();$("#pinconnect").val("").val(e),$("#pwdbybutton").css("pointer-events","auto"),$(" #ssid #button_connecttwo").css("pointer-events","auto")}else $("#pwdbybutton").click();else"block"==$("div#myModal").css("display")&&$("#passwordbutton").click()})),$("#passwordinput").bind("input propertychange change",(function(e){compositionInputLock||pwdInputChecker()})),$("#passwordinput").on("compositionstart",(function(){compositionInputLock=!0})),$("#passwordinput").on("compositionend",(function(){compositionInputLock=!1,pwdInputChecker()})),$("#passwordbutton").click((function(){connectbypw()})),$("#ipNotPro_check").click((function(){$("#ipNotPro").css("display","none")})),$(".close").click((function(){""!=$("#pinconnect").val()&&setTimeout((function(){$("#pinconnect").focus()}),1e3)})),$("#div_home").click((async function(){reset(!0)})),$("#btn_eshare_two_suspend").click((function(){$(this).hasClass("continue")?($("#btn_eshare_two_suspend").removeClass("continue"),$("#btn_eshare_two_suspend").css("background-image","url(/imagesAccount/ic_share_pause_normal@3x.png)"),$(".div_show").text(chrome.i18n.getMessage("ScreenIsShare")),chrome.runtime.sendMessage({action:"continuescreen"})):($("#btn_eshare_two_suspend").addClass("continue"),$("#btn_eshare_two_suspend").css("background-image","url(/imagesAccount/ic_share_play_normal@3x.png)"),$(".div_show").text(chrome.i18n.getMessage("pausedScreen")),chrome.app.window.get("ESClientMain").minimize(),setTimeout((function(){chrome.runtime.sendMessage({action:"pasuedscreen"})}),500))})),$("#bnt_eshare_two_contine").click((function(){chrome.runtime.sendMessage({action:"sendTCPMsg",address:address,msg:"ScreenCap\r\nfinish\r\n\r\n"}),trackEvent("click","Mirror","Stop"),chrome.runtime.sendMessage({action:"stopMirror"})})),$("#div_home_image").click((function(){2==castMode&&1==castState&&1!=multiScreen?(sendFullScreen(),$("#Cpermisson").css("display","block"),$("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("waitScreenConnect")),$("#Cyes").addClass("allowFullCast"),$(".allowFullCast").css("display","none"),$("#Ccancel").css("margin-left","70px"),$("#Ccancel").addClass("allowFullCastCancel"),allowCastTime=setTimeout((function(){allowFullCastTimeOut||($("#Ctitle b").text(""),$("#Ctitle").css("border","none"),$("#Ccontext").text(chrome.i18n.getMessage("requestTimeout")),$("#Cyes").removeClass("allowFullCast"),$("#Ccancel").removeClass("allowFullCastCancel"),$("#Cyes").addClass("allowFullCastTimeOut"),$("#Ccancel").addClass("allowFullCastTimeOutCancel"))}),1e4)):1==castMode&&1==castState&&1!=multiScreen?sendFullScreen():2==castState&&1!=multiScreen&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:cancelFullCastClient})})),$("#setting").click((function(){$("#setting_info").toggle()})),$("#footer_navigation_setting").click((function(){"block"==$("#local_ip").css("display")&&($("#local_ip").css("display","none"),$("#local_ip_table").empty()),$("#setting_info_connect").toggle()})),$("#footer_navigation_account").click((function(){$(".div_cong").toggle(),$("#main_control_index").toggle()})),$("#mci_header_close").click((function(){$(".div_cong").toggle(),$("#main_control_index").toggle()})),$("#setting_info_connect ul li:nth-child(1)").click((function(){$("#inputChromeAccount").css("display","block"),setTimeout((function(){$("#ChromeAccount").val(chromeAccount),$("#ChromeAccount").focus(),$("#ChromeAccount").select()}),200),$("#about_app_div").css("display","none")})),$("#setting_info_connect ul li:nth-child(4)").click((function(){$("#about_app_div").css("display","block"),$("#inputChromeAccount").css("display","none")})),$("#account_button_cancel").click((function(){$("#inputChromeAccount").css("display","none"),$("#name_p").text("")})),$("#close_account").click((function(){$("#inputChromeAccount").css("display","none"),$("#name_p").text("")})),$("#about_header_close").click((function(){$("#about_app_div").css("display","none")})),$("#Cyes").click((function(){if($("#Cyes").hasClass("closeScreen")&&($("#Cyes").removeClass("closeScreen"),$("#Ccancel").removeClass("closeScreenCancel"),$("#Cpermisson").css("display","none"),$("#Ccancel").css("display","block"),$("#Ccancel").css("margin-left","70px")),$("#Cyes").hasClass("allowCastTimeOut")&&($("#Cpermisson").css("display","none"),$("#Cyes").css("margin-right","16px"),$("#Cyes").removeClass("allowCastTimeOut"),$("#Ccancel").removeClass("allowCastTimeOutCancel")),$("#Cyes").hasClass("allowCastRequest")&&($("#Cpermisson").css("display","none"),$("#Ctitle b").text(""),$("#Cyes").removeClass("allowCastRequest"),$("#Ccancel").removeClass("allowCastRequestCancel"),$("#Ccancel").css("display","block"),$("#Ccancel").css("margin-left","70px")),$("#Cyes").hasClass("allowMirrorCastTimeOut")&&($("#Cpermisson").css("display","none"),$("#Cyes").removeClass("allowMirrorCastTimeOut"),$("#Ccancel").removeClass("allowMirrorCastTimeOutCancel")),$("#Cyes").hasClass("askInvitation")){invitationTimeOut=!0,invitationfunc&&clearTimeout(invitationfunc);var e=JSON.stringify({replyCastInvite:1}).toString();chrome.runtime.sendMessage({action:"askInvitation",askInvitationKey:e}),$("#Cyes").removeClass("askInvitation"),$("#Ccancel").removeClass("askInvitationCancel"),$("#Cyes").html(chrome.i18n.getMessage("Determine")),$("#Ccancel").html(chrome.i18n.getMessage("cancel")),$("#Cpermisson").css("display","none"),btn_eshare_click()}$("#Cyes").hasClass("allowFullCastRequest")&&($("#Cyes").removeClass("allowFullCastRequest"),$("#Ccancel").removeClass("allowFullCastRequestCancel"),$("#Cpermisson").css("display","none"),$("#Ccancel").css("display","block"),$("#Ccancel").css("margin-left","70px"))})),$("#Ccancel").click((function(){if($("#Ccancel").hasClass("allowCastCancel")&&(allowCastTimeOut=!0,allowCastTime&&clearTimeout(allowCastTime),$("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCast"),$("#Ccancel").removeClass("allowCastCancel"),IsCommonProtocol&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:cancelCastClient}),IsBoxlightProtocol&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:box_cancelCastClient})),$("#Ccancel").hasClass("allowFullCastCancel")&&(allowFullCastTimeOut=!0,allowCastTime&&clearTimeout(allowCastTime),$("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowFullCast"),$("#Ccancel").removeClass("allowFullCastCancel"),IsCommonProtocol&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:cancelCastClient}),IsBoxlightProtocol&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:box_cancelFullCastClient})),$("#Ccancel").hasClass("allowCastTimeOutCancel")&&($("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowCastTimeOut"),$("#Ccancel").removeClass("allowCastTimeOutCancel")),$("#Ccancel").hasClass("allowFullCastTimeOutCancel")&&($("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowFullCastTimeOut"),$("#Ccancel").removeClass("allowFullCastTimeOutCancel")),$("#Ccancel").hasClass("allowMirrorCastCancel")&&(mirrorTimeOut=!0,allowMirrorCastTime&&clearTimeout(allowMirrorCastTime),$("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Cyes").removeClass("allowMirrorCast"),$("#Ccancel").removeClass("allowMirrorCastCancel"),IsCommonProtocol&&chrome.runtime.sendMessage({action:"cancelCast",cancelCastKey:cancelCastClient})),$("#Ccancel").hasClass("allowMirrorCastTimeOutCancel")&&($("#Cpermisson").css("display","none"),$("#Cyes").css("display","block"),$("#Ccancel").css("margin-left","16px"),$("#Cyes").removeClass("allowMirrorCastTimeOut"),$("#Ccancel").removeClass("allowMirrorCastTimeOutCancel")),$("#Ccancel").hasClass("askInvitationCancel")){invitationTimeOut=!0,invitationfunc&&clearTimeout(invitationfunc);var e=JSON.stringify({replyCastInvite:0}).toString();chrome.runtime.sendMessage({action:"askInvitation",askInvitationKey:e}),$("#Cyes").removeClass("askInvitation"),$("#Ccancel").removeClass("askInvitationCancel"),$("#Cyes").html(chrome.i18n.getMessage("Determine")),$("#Ccancel").html(chrome.i18n.getMessage("cancel")),$("#Cpermisson").css("display","none")}})),$("#checkDb").bind("input propertychange",(function(){$("#checkDb").is(":checked")?$("#checkDk").prop("checked",!1):$("#checkDk").prop("checked",!0)})),$("#checkDk").bind("input propertychange",(function(){$("#checkDk").is(":checked")?$("#checkDb").prop("checked",!1):$("#checkDb").prop("checked",!0)}));